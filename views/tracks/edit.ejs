<h1>Edit Track</h1>
<%- include("../partials/errors.ejs") %>
<form action="/tracks/<%= track.track_id %>/update" method="POST">
  <label for="title">Title:</label>
  <input type="text" name="title" id="title" value="<%= track.title %>" required />

  <label for="duration">Duration (seconds):</label>
  <input type="number" name="duration" id="duration" value="<%= track.duration %>" required />

  <label for="album_id">Album:</label>
  <select name="album_id" id="album_id">
    <option value="">(None)</option>
    <% albums.forEach(album => { %>
      <option value="<%= album.album_id %>" <%= album.album_id === track.album_id ? 'selected' : '' %>><%= album.title %></option>
    <% }) %>
  </select>

  <label>Artist(s):</label>
  <select id="artist_ids" name="artist_ids" multiple style="width: 300px;">
    <% artists.forEach(artist => { %>
      <option value="<%= artist.artist_id %>" <%= trackArtistIds.includes(artist.artist_id) ? 'selected' : '' %>>
        <%= artist.name %>
      </option>
    <% }) %>
  </select>

  <button type="submit">Save Changes</button>
</form>


<link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
<script>
  $(document).ready(() => {
    $('#artist_ids').select2({ placeholder: 'Search and select artist(s)', allowClear: true });
  });
</script>
